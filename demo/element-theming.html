<dom-module id='element-theming'>
  <template>
    <style include='vaadin-component-demo-shared-styles'>
      :host {
        display: block;
      }
    </style>


  <h3>Styling the Content</h3>
  The visual looks can be changed using CSS.
  <vaadin-demo-snippet id='cookie-consent-demo-customizing-texts'>
    <template preserve-content>
      <style>
        div.cc-window.cc-banner {
          background: rgb(136, 212, 254);
        }

        .cc-window .cc-dismiss {
          background: rgb(255, 81, 0);
        }

        .cc-window {
          font-size: 24px;
        }

        .cc-window .cc-message {
          color: rgb(0, 0, 255);
        }

        div.cc-window .cc-message a.cc-link {
          color: rgb(255, 81, 0);
        }
      </style>
      <vaadin-button>Show consent popup</vaadin-button>
      <vaadin-cookie-consent></vaadin-cookie-consent>
    </template>
    <script>
        window.addDemoReadyListener('#cookie-consent-demo-customizing-texts', e => {
          const demoShadowDomRenderer = e.querySelector('vaadin-demo-shadow-dom-renderer').shadowRoot;
          const cookieConsent = demoShadowDomRenderer.querySelector('vaadin-cookie-consent');
          demoShadowDomRenderer
            .querySelector('vaadin-button')
            .addEventListener('click', e => cookieConsent._show());
          const styles = demoShadowDomRenderer.querySelectorAll('style');
          const css = styles[styles.length - 1].innerText;
          window.styleTag = document.createElement('style');
          window.styleTag.innerText = css;
          document.head.appendChild(window.styleTag);
          window.addEventListener('on-location-change', e => {
            cookieConsent.remove();
            if (window.styleTag) {
              window.styleTag.parentElement.removeChild(window.styleTag);
              window.styleTag = undefined;
            }
          }, {once: true});
        });
    </script>  
  </vaadin-demo-snippet>

  </template>
  <script>
    class ElementTheming extends DemoReadyEventEmitter(ElementDemo(Polymer.Element)) {
      static get is() {
        return 'element-theming';
      }

      disconnectedCallback() {
        super.disconnectedCallback();
        if (window.styleTag) {
          window.styleTag.parentElement.removeChild(window.styleTag);
          window.styleTag = undefined;
        }
      }
    }

    customElements.define(ElementTheming.is, ElementTheming);
  </script>
</dom-module>
